<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
</head>
<body>
    <div id="list">
        <!-- 지역 : 전주, 부서 : IT, 이름 : 박수훈 -->
        <!-- 근무지역 : 서울 -->
        <ul></ul>
        <!-- 부서 : 영업 -->
        <ul></ul>
        <!-- 부서 : 생산 -->
        <ul></ul>
    </div>
    <script>
        let data = [
            {"area" : "서울", "dept" : "영업", "name" : "무대리"},
            {"area" : "부산", "dept" : "영업", "name" : "홍과장"},
            {"area" : "대전", "dept" : "생산", "name" : "박사장"},
            {"area" : "서울", "dept" : "생산", "name" : "김부장"}
        ];
        // let seoulAry = $.grep(data, function(obj, idx){
        //     return obj.area == '서울' ? true : false;
        // })
        // let ulTag = $('#list ul:first');
        // $.each(seoulAry, function(index, object){
        //     let liTag = $('<li/>').text(`지역 : ${object.area}, 부서 : ${object.dept}, 이름 : ${object.name}`);
        //     ulTag.append(liTag);
        // });
        // $('#list').append(ulTag);
        
        
        // let deptAry = $.grep(data, function(obj, idx){
        //     return obj.dept == '영업' ? true : false;
        // })
        
        // ulTag = $('')
        
        // 1) 각 조건에 만족하는 사원들 -> 새로운 배열 : $.map(), $.grep()
        // 2) 새로운 배열의 모든 데이터 -> li태그로 생성 : each()
        // 2-1) ul 태그 탐색
        // 2-2) each() 순환
        // 2-2-1) 배열의 개별 값 -> li 태그 생성
        // 2-2-2) 탐색한 ul 태그에 하위요소로 추가

        // 1) 근무지역 : 서울
        let areaDatas = $.map(data, function(obj, idx){
            if(obj.area == '서울'){
                return obj;
            }
        });
        
        let ulTag = $('#list > ul:first');

        /*
        $(areaDatas).each(function(idx, obj){
            let liTag = $('<li/>').text(`지역 : ${obj['area']}, 부서 : ${obj['dept']}, 이름 : ${obj['name']}`);
            ulTag.append(liTag);
        });
        */
        appendTag(ulTag, areaDatas);

        // 2) 부서 : 영업
        let deptDatas = $.grep(data, function(obj, idx){
            if(obj.dept == '영업'){
                return true;
            }else{
                return false;
            }
        });

        ulTag = ulTag.next();

        /*
        $.each(deptDatas, function(idx, obj){
            let liTag = $('<li/>').text('지역 : ' + obj.area + ', 부서 : ' + obj.dept + ', 이름 : ' + obj.name);
            ulTag.append(liTag);
        });
        */
        appendTag(ulTag, deptDatas);
       

        // 3) 부서 : 생산
        deptDatas = $.map(data, function(obj, idx){
            if(obj.dept == '생산'){
                return obj;
            }
        });

        ulTag = ulTag.next();

        /*
        $(deptDatas).each(function(idx, obj){
            let liTag = $('<li/>').text(`지역 : ${obj['area']}, 부서 : ${obj['dept']}, 이름 : ${obj['name']}`)
            ulTag.append(liTag);
        });
        */
        appendTag(ulTag, deptDatas);

        // const appendTag = function(tag, dats){
        function appendTag(tag, datas){
            $(datas).each(function(idx, obj){
                let liTag = $('<li/>').text(`지역 : ${obj['area']}, 부서 : ${obj['dept']}, 이름 : ${obj['name']}`)
                tag.append(liTag);
            });
        }

    </script>
</body>
</html>